@startuml
' + - public
' # - protected
' - - private 
' ~ - package private

''' GameController '''
class GameController {
    IsMenuActive : bool
    RunCommand(string input) : void
    GameFactory(GameConfig config) : Game
    Start() : void
    NewGame() : void
    LoadGame() : void
}

''' Game '''
abstract class Game {
    Grid : Grid
    PlayerOne : Player
    PlayerTwo: Player
    IsGameActive : bool
    MoveSequence : list<string>
    file : FileController
    GetInputGame : string
    DocumentMove(string move) : void
    UndoMove() : bool
    RedoMove() : bool
    PlayMoveSequence() : void
    TryHandleCommand(string input) : bool
    {abstract} TryParseMove(string input, out int lane) : bool
    {abstract} GameLoop() : void
    PlayTurn(Human player) : bool
    {abstract} PlayTurn(Computer player) : bool
    {abstract} CreateDisc() : Disc
}

' Game Subclasses
class LineUpClassic {
    PlayTurn(Computer player) : bool
    GameLoop() : void
}

class LineUpBasic {
    PlayTurn(Computer player) : bool
    GameLoop() : void
}

class LineUpSpin {
    PlayTurn(Computer player) : bool
    GameLoop() : void
}

''' Grid '''
class Grid {
    Board : Disc[][]
    Orientation : enum
    orientation : Orientation
    WinLength : int
    TurnCounter : int
    IncrementTurnCounter() : void
    DecrementTurnCounter() : void
    SetTurnCounter(int num) : bool
    IncrementOrientation() : void
    IsTieGame(Player p1, Player p2) : bool
    AddDisc(int lane) : bool
    ApplyGravity(Orientation orientation) : void
    Spin() : void
    DrawGrid() : void
    CheckWinCondition() : bool
    Reset() : void    

}

enum Orientation {
    0
    90
    180
    270
}

'''Disc'''
abstract class Disc {
    Symbol : string
    IsPlayerOne : bool
    {abstract} ApplyEffects(Disc[][] Board, int lane) : void
    {abstract} HasDiscRemaining(Player player) : bool
    {abstract} WithdrawDisc(Player player) : void
}

class OrdinaryDisc {
    ApplyEffects(Disc[][] Board, int lane) : void
    HasDiscRemaining(Player player) : bool
    WithdrawDisc(Player player) : void
}

class BoringDisc {
    ApplyEffects(Disc[][] Board, int lane) : void
    HasDiscRemaining(Player player) : bool
    WithdrawDisc(Player player) : void
}

class ExplosiveDisc {
    ApplyEffects(Disc[][] Board, int lane) : void
    HasDiscRemaining(Player player) : bool
    WithdrawDisc(Player player) : void
}

class MagneticDisc {
    ApplyEffects(Disc[][] Board, int lane) : void
    HasDiscRemaining(Player player) : bool
    WithdrawDisc(Player player) : void
}

''' Player '''
abstract class Player {
    DiscBalance : Dictionary<string, int>
    HasDiscBalanceRemaining() : bool
}

class Human {
}

class Computer {
}

''' IOController '''
class IOController {
    PrintGreen(string text) : void
    PrintError(string text) : void
    PrintSuccess(string text) : void
    PrintMenu() : void
    PrintBannerNewGame() : void
    PrintWinner(bool P1, bool P2) : void
    GetInputMenu() : int
    GetInputNewGame() : GameConfig
}

note left of IOController::GetInputNewGame
    Currently responsible for too much.
    Will need to be broken into:
    GetInputGameMode
    GetInputPlayerMode
    GetInputGridSize
end note


''' GameConfig '''
class GameConfig {
    PlayerMode : enum
    GameMode : enum
    SelectedPlayerMode : PlayerMode
    SelectedGameMode : GameMode
    GridHeight : int
    GridWidth : int
    SetGameMode(GameMode mode) : bool
    SetPlayerMode(PlayerMode mode) : bool
    SetGridHeight(int rows) : bool
    SetGridWidth(int cols) : bool
}

enum PlayerMode {
    HvH
    HvC
}

enum GameMode {
    Classic
    Basic
    Spin
}

''' FileController '''
class FileController {
    GameSerialization() : void
    GameDeserialization() : void
}

' Relationships
' Game Subclasses
Game <|-- LineUpClassic : inherits
Game <|-- LineUpBasic : inherits
Game <|-- LineUpSpin : inherits
Game <-- Player

Game::Grid *-- "1" Grid : uses
Game - IOController

' GameController
GameController - Game
GameController <-- IOController
GameController::LoadGame <-- FileController : uses

' GameConfig
GameConfig::PlayerMode <-- PlayerMode : uses
GameConfig::GameMode <-- GameMode: uses

' Player Subclasses
Player <|-- Human : inherits
Player <|-- Computer : inherits

' Disc Subclasses
Disc <|-- OrdinaryDisc : inherits
Disc <|-- BoringDisc : inherits
Disc <|-- ExplosiveDisc : inherits
Disc <|-- MagneticDisc : inherits

' Grid
Grid::Orientation <-- Orientation : uses
Grid::Board <-- Disc : uses

' IOController
IOController <-- GameConfig

@enduml